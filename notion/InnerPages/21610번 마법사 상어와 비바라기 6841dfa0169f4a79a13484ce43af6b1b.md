---
layout: post
title:  "커스텀 포스트"
date:   2022-10-13 15:37:18 +0900
categories: 
---

# 21610번: 마법사 상어와 비바라기

소유자: 준혁 최
태그: 백준

> 문제 url : [https://www.acmicpc.net/problem/21610](https://www.acmicpc.net/problem/21610)
> 

---

### 솔루션 코드

```cpp
#include <iostream>
#include <vector>

using namespace std;

vector<vector<int>> A;
int N, M;
vector<int> d;
vector<int> s;
vector<pair<int, int>> cloud;
vector<vector<int>> preState;

vector<pair<int, int>> controller;

void moveCloud(int dir, int space){
    for (unsigned int i=0; i<cloud.size(); ++i){
        cloud[i].first = (cloud[i].first + controller[dir].first * space) % N;
        cloud[i].second = (cloud[i].second + controller[dir].second * space) % N;
        preState[cloud[i].first][cloud[i].second] = 1;
    }
}

void rain(){
    for (unsigned int i=0; i<cloud.size(); ++i){
        A[cloud[i].first][cloud[i].second] += 1;
    }
}

void copyBasket(int x, int y){
    int total = 0;
    if(x > 0 && y > 0 && A[x-1][y-1]) total += 1;
    if(x > 0 && y < N-1 && A[x-1][y+1]) total += 1;
    if(x < N-1 && y > 0 && A[x+1][y-1]) total += 1;
    if(x < N-1 && y < N-1&& A[x+1][y+1]) total += 1;
    A[x][y] += total;
}

void copyWater(){
    for (unsigned int i=0; i<cloud.size(); ++i)
        copyBasket(cloud[i].first, cloud[i].second);
}

void cloudGen(){
    cloud.clear();
    for (int i=0; i<N; ++i){
        for (int j=0; j<N; ++j){
            if (A[i][j] > 1 && preState[i][j] != 1){
                cloud.push_back(make_pair(i, j));
                A[i][j] -= 2;
            }
        }
    }
}

void initpreState(){
    for (int i=0; i<N; ++i){
        for (int j=0; j<N; ++j){
            preState[i][j] = 0;
        }
    }
}

int main(){
    cin >> N >> M;
    A = vector<vector<int>>(N, vector<int>(N));
    d = vector<int>(M);
    s = vector<int>(M);
    preState = vector<vector<int>>(N, vector<int>(N));
    
    controller = {make_pair(0, N-1), make_pair(N-1, N-1), make_pair(N-1, 0), make_pair(N-1, 1), make_pair(0, 1), make_pair(1, 1), make_pair(1, 0), make_pair(1, N-1)};
    
    for (int i=0; i<N; ++i){
        for (int j=0; j<N; ++j){
            cin >> A[i][j];
            preState[i][j] = 0;
        }
    }
    preState[0][0] = 0;
            
    for (int i=0; i<M; ++i){
        cin >> d[i];
        cin >> s[i];
    }
    
    // rain shower
    cloud = {make_pair(N-1, 0), make_pair(N-1, 1), make_pair(N-2, 0), make_pair(N-2, 1)};
    
    for (int i=0; i<M; ++i){
        //preState[0][0] = 0;
        initpreState();
        moveCloud(d[i]-1, s[i]);
        rain();
        copyWater();
        cloudGen();
    }
    int answer = 0;
    for (int i=0; i<N; ++i){
        for (int j=0; j<N; ++j){
            answer += A[i][j];
        }
    }
    cout << answer;
    A.clear();
    d.clear();
    s.clear();
    cloud.clear();
    preState.clear();
    controller.clear();
    return 0;
}
```

---

### 문제 분석

---